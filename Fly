-- main lua


--[[ 
📦 Script Terbang Minimalis (posisi Fly ON diperbaiki)
]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "FlySimpleUI"
gui.ResetOnSpawn = false

local function createBtn(name, pos, text)
	local btn = Instance.new("TextButton", gui)
	btn.Name = name
	btn.Size = UDim2.new(0, 60, 0, 60)
	btn.Position = pos
	btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	btn.TextColor3 = Color3.new(1, 1, 1)
	btn.Text = text
	btn.TextScaled = true
	btn.Font = Enum.Font.GothamBold
	Instance.new("UICorner", btn).CornerRadius = UDim.new(1, 0)
	return btn
end

local btns = {
	Forward = createBtn("Forward", UDim2.new(0, 90, 1, -170), "↑"),
	Backward = createBtn("Backward", UDim2.new(0, 90, 1, -60), "↓"),
	Left = createBtn("Left", UDim2.new(0, 30, 1, -115), "←"),
	Right = createBtn("Right", UDim2.new(0, 150, 1, -115), "→"),
	Up = createBtn("Up", UDim2.new(1, -160, 1, -170), "⬆"),
	Down = createBtn("Down", UDim2.new(1, -160, 1, -60), "⬇"),
	Toggle = createBtn("Toggle", UDim2.new(1, -170, 0, 40), "Fly OFF"), -- posisi diperbaiki
	Close = createBtn("Close", UDim2.new(1, -100, 0, 40), "X")
}

local flying = false
local move = {
	Forward = false, Backward = false,
	Left = false, Right = false,
	Up = false, Down = false
}
local speed = 60
local force

btns.Toggle.MouseButton1Click:Connect(function()
	flying = not flying
	btns.Toggle.Text = flying and "Fly ON" or "Fly OFF"

	if flying then
		force = Instance.new("BodyForce", hrp)
	else
		if force then force:Destroy() end
		hrp.Velocity = Vector3.zero
	end
end)

btns.Close.MouseButton1Click:Connect(function()
	gui:Destroy()
end)

for dir, btn in pairs(btns) do
	if move[dir] ~= nil then
		btn.MouseButton1Down:Connect(function()
			move[dir] = true
			btn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
		end)
		btn.MouseButton1Up:Connect(function()
			move[dir] = false
			btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
		end)
	end
end

RunService.RenderStepped:Connect(function()
	if not flying then return end
	local camCF = workspace.CurrentCamera.CFrame
	local dir = Vector3.zero

	if move.Forward then dir += camCF.LookVector end
	if move.Backward then dir -= camCF.LookVector end
	if move.Left then dir -= camCF.RightVector end
	if move.Right then dir += camCF.RightVector end
	if move.Up then dir += camCF.UpVector end
	if move.Down then dir -= camCF.UpVector end

	if force then
		force.Force = Vector3.new(0, workspace.Gravity * hrp.AssemblyMass, 0)
	end
	hrp.Velocity = dir.Magnitude > 0 and dir.Unit * speed or Vector3.zero
end)
