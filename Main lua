-- main.lua

-- WHO AM I GUI SCRIPT + TELEPORT + SENTER
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local player = Players.LocalPlayer
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.ResetOnSpawn = false

-- WHO AM I Button
local whoAmIBtn = Instance.new("TextButton")
whoAmIBtn.Size = UDim2.new(0, 120, 0, 40)
whoAmIBtn.Position = UDim2.new(0.5, -60, 1, -100)
whoAmIBtn.AnchorPoint = Vector2.new(0.5, 1)
whoAmIBtn.Text = "WHO AM I"
whoAmIBtn.TextScaled = true
whoAmIBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
whoAmIBtn.TextColor3 = Color3.new(1, 1, 1)
whoAmIBtn.Font = Enum.Font.GothamBold
whoAmIBtn.Parent = gui

local function createButton(name, yOffset)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0, 140, 0, 40)
	btn.Position = UDim2.new(0.5, -70, 1, yOffset)
	btn.AnchorPoint = Vector2.new(0.5, 1)
	btn.Text = name
	btn.TextScaled = true
	btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	btn.TextColor3 = Color3.new(1, 1, 1)
	btn.Font = Enum.Font.Gotham
	btn.Visible = false
	btn.TextTransparency = 1
	btn.Parent = gui
	return btn
end

-- Submenu buttons
local senterBtn = createButton("Senter", -150)
local bypassBtn = createButton("Bypass Puncak", -100)

-- Main menu buttons
local pos1 = createButton("Pos 1", -200)
local pos2 = createButton("Pos 2", -250)
local pos3 = createButton("Pos 3", -300)
local pos4 = createButton("Pos 4", -350)
local puncak = createButton("Puncak", -400)

-- Teleport locations
local teleportLocations = {
	["Pos 1"] = Vector3.new(0, 5, 0),
	["Pos 2"] = Vector3.new(50, 5, 0),
	["Pos 3"] = Vector3.new(100, 5, 0),
	["Pos 4"] = Vector3.new(150, 5, 0),
	["Puncak"] = Vector3.new(200, 5, 0),
}

-- Loading screen
local loadingFrame = Instance.new("Frame")
loadingFrame.Size = UDim2.new(1, 0, 1, 0)
loadingFrame.BackgroundColor3 = Color3.new(0, 0, 0)
loadingFrame.Parent = gui

local img = Instance.new("ImageLabel")
img.Image = "rbxassetid://18423224238"
img.Size = UDim2.new(0, 100, 0, 100)
img.Position = UDim2.new(0.5, -50, 0.4, 0)
img.BackgroundTransparency = 1
img.Parent = loadingFrame

local loadingText = Instance.new("TextLabel")
loadingText.Text = "Loading..."
loadingText.Size = UDim2.new(0, 200, 0, 50)
loadingText.Position = UDim2.new(0.5, -100, 0.6, 0)
loadingText.BackgroundTransparency = 1
loadingText.TextColor3 = Color3.new(1, 1, 1)
loadingText.TextScaled = true
loadingText.Font = Enum.Font.GothamBold
loadingText.Parent = loadingFrame

wait(4)
loadingFrame:Destroy()

-- State
local menuOpen = false
local submenuOpen = false
local flashlightOn = false

-- Flashlight
local function toggleFlashlight()
	flashlightOn = not flashlightOn
	Lighting.Brightness = flashlightOn and 3 or 1
end

-- Button visibility handler
local function toggleButtonVisibility(buttons, visible)
	for _, btn in pairs(buttons) do
		btn.Visible = true
		local tween = TweenService:Create(btn, TweenInfo.new(0.3), {TextTransparency = visible and 0 or 1})
		tween:Play()
		if not visible then
			task.delay(0.3, function()
				btn.Visible = false
			end)
		end
	end
end

-- WHO AM I click handler
whoAmIBtn.MouseButton1Click:Connect(function()
	menuOpen = not menuOpen
	submenuOpen = false

	whoAmIBtn.TextColor3 = menuOpen and Color3.new(1, 0, 0) or Color3.new(1, 1, 1)

	toggleButtonVisibility({senterBtn, bypassBtn}, menuOpen)
	toggleButtonVisibility({pos1, pos2, pos3, pos4, puncak}, false)
end)

local function openMainButtons()
	if not submenuOpen then
		submenuOpen = true
		toggleButtonVisibility({pos1, pos2, pos3, pos4, puncak}, true)
	end
end

senterBtn.MouseButton1Click:Connect(function()
	toggleFlashlight()
	openMainButtons()
end)

bypassBtn.MouseButton1Click:Connect(function()
	player.Character:MoveTo(teleportLocations["Puncak"])
	openMainButtons()
end)

-- Teleport buttons
pos1.MouseButton1Click:Connect(function()
	player.Character:MoveTo(teleportLocations["Pos 1"])
end)

pos2.MouseButton1Click:Connect(function()
	player.Character:MoveTo(teleportLocations["Pos 2"])
end)

pos3.MouseButton1Click:Connect(function()
	player.Character:MoveTo(teleportLocations["Pos 3"])
end)

pos4.MouseButton1Click:Connect(function()
	player.Character:MoveTo(teleportLocations["Pos 4"])
end)

puncak.MouseButton1Click:Connect(function()
	player.Character:MoveTo(teleportLocations["Puncak"])
end)
